<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>javascript高频面试题-this指向 | 沈志勇的小站</title>
    <meta name="description" content="沈志勇,沈志勇说,前端面试题,一个专注帮助同学们自学的网站，一同学习进步！">
    <link rel="icon" href="https://shenzhiyong.com.cn/logo.jpeg">
    
    <link rel="preload" href="/assets/css/0.styles.2c4a1029.css" as="style"><link rel="preload" href="/assets/js/app.9ae891ff.js" as="script"><link rel="preload" href="/assets/js/2.228b9d30.js" as="script"><link rel="preload" href="/assets/js/23.118f77fb.js" as="script"><link rel="prefetch" href="/assets/js/10.9077e6cc.js"><link rel="prefetch" href="/assets/js/11.ddcaa215.js"><link rel="prefetch" href="/assets/js/12.938b99b6.js"><link rel="prefetch" href="/assets/js/13.5f2f993e.js"><link rel="prefetch" href="/assets/js/14.9b453952.js"><link rel="prefetch" href="/assets/js/15.7b0d2f3d.js"><link rel="prefetch" href="/assets/js/16.80d22416.js"><link rel="prefetch" href="/assets/js/17.cfc8f341.js"><link rel="prefetch" href="/assets/js/18.2d4db055.js"><link rel="prefetch" href="/assets/js/19.1d4ff002.js"><link rel="prefetch" href="/assets/js/20.3e34e189.js"><link rel="prefetch" href="/assets/js/21.49e48886.js"><link rel="prefetch" href="/assets/js/22.aa0f5016.js"><link rel="prefetch" href="/assets/js/24.82c7b259.js"><link rel="prefetch" href="/assets/js/25.79ed5681.js"><link rel="prefetch" href="/assets/js/3.3fb77b1a.js"><link rel="prefetch" href="/assets/js/4.0b61c720.js"><link rel="prefetch" href="/assets/js/5.ded464f6.js"><link rel="prefetch" href="/assets/js/6.cc664488.js"><link rel="prefetch" href="/assets/js/7.8518ac87.js"><link rel="prefetch" href="/assets/js/8.ea589370.js"><link rel="prefetch" href="/assets/js/9.679fa8b9.js">
    <link rel="stylesheet" href="/assets/css/0.styles.2c4a1029.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">沈志勇的小站</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">引导页</a></div><div class="nav-item"><a href="/home/" class="nav-link">进阶</a></div><div class="nav-item"><a href="/job/" class="nav-link">招聘*内推</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">博客</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/u011456552" target="_blank" rel="noopener noreferrer" class="nav-link external">
  csdn
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.zhihu.com/people/chen-zhi-yong-65-38/activities" target="_blank" rel="noopener noreferrer" class="nav-link external">
  zhihu
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><a href="https://github.com/szy1000" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">引导页</a></div><div class="nav-item"><a href="/home/" class="nav-link">进阶</a></div><div class="nav-item"><a href="/job/" class="nav-link">招聘*内推</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">博客</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/u011456552" target="_blank" rel="noopener noreferrer" class="nav-link external">
  csdn
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.zhihu.com/people/chen-zhi-yong-65-38/activities" target="_blank" rel="noopener noreferrer" class="nav-link external">
  zhihu
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><a href="https://github.com/szy1000" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/home/" class="sidebar-link">主页</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>html面试题</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>css面试题</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>javascript面试题</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/js/one.html" class="sidebar-link">对象的拷贝</a></li><li><a href="/js/delay/300ms.html" class="sidebar-link">如何解决移动端300ms延迟的问题</a></li><li><a href="/js/this/" class="active sidebar-link">this指向</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/js/this/#默认绑定" class="sidebar-link">默认绑定</a></li><li class="sidebar-sub-header"><a href="/js/this/#隐式绑定" class="sidebar-link">隐式绑定</a></li><li class="sidebar-sub-header"><a href="/js/this/#显示绑定" class="sidebar-link">显示绑定</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="javascript高频面试题-this指向"><a href="#javascript高频面试题-this指向" aria-hidden="true" class="header-anchor">#</a> javascript高频面试题-this指向</h1> <p>回忆当初刚入门前端的时候，每次刷this的指向问题都是一脸蒙蔽，只想说：this老哥，你到底要闹哪样啊？随着学习的深入，我今天也来总结一番。这一前端领域的高频面试题。</p> <h2 id="默认绑定"><a href="#默认绑定" aria-hidden="true" class="header-anchor">#</a> 默认绑定</h2> <p>先来看一个代码</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">'global'</span>
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">//输出什么？</span>
</code></pre></div><p>答案是： window 和 global</p> <p>原因如下：</p> <p>一、当我们在全局声明一个变量(name)的时候，就好比给window添加了一个name的属性。我们可以在控制台输入(window.name)，看看输出。二、当我们执行 foo() 的时候， 其实使用了默认的window这个全局对象。foo() 仅是 window.foo() 的一种简写。
三、由此可见，函数执行的时候使用了默认绑定，将this绑定到了全局对象window上。this.name就指向了全局的 name</p> <p>tips: 注意一下：</p> <h3 id="默认绑定有一坑"><a href="#默认绑定有一坑" aria-hidden="true" class="header-anchor">#</a> 默认绑定有一坑</h3> <h4 id="一、如果在严格模式下面会略有不同"><a href="#一、如果在严格模式下面会略有不同" aria-hidden="true" class="header-anchor">#</a> 一、如果在严格模式下面会略有不同</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">'global'</span>
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token string">'use strict'</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">//输出什么？</span>

</code></pre></div><p>答案是： undefined 和 Uncaught TypeError: Cannot read property 'name' of undefined</p> <p>小tips: 把var改成let的话，this.name是无法访问到的。这个应该属于作用域那一块的。这里碰到了，顺便提一下。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token string">'global'</span>
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">//window 和  undefined</span>
</code></pre></div><h2 id="隐式绑定"><a href="#隐式绑定" aria-hidden="true" class="header-anchor">#</a> 隐式绑定</h2> <p>我们对上面的代码进行一点点修改</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">'global'</span>

<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
	name<span class="token punctuation">:</span> <span class="token string">'obj'</span><span class="token punctuation">,</span>
	foo<span class="token punctuation">:</span> foo
<span class="token punctuation">}</span>

obj<span class="token punctuation">.</span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 输出什么呢？</span>
</code></pre></div><p>答案是： { name: 'obj', fn: f } 和  obj</p> <p>一、当 foo函数执行时，函数引用上下文对象时，隐式绑定会把函数中的this绑定到obj对象上
二、因此this就等于obj</p> <h3 id="隐式绑定有一坑"><a href="#隐式绑定有一坑" aria-hidden="true" class="header-anchor">#</a> 隐式绑定有一坑</h3> <p>这个坑，我之前刷面试题的时候，也遇到过。后来看了解析之后，醍醐灌顶一般清醒了。我们对上面的代码进行修改</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">'global'</span>

<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
	name<span class="token punctuation">:</span> <span class="token string">'obj'</span><span class="token punctuation">,</span>
	foo<span class="token punctuation">:</span> foo
<span class="token punctuation">}</span>

<span class="token keyword">var</span> fn <span class="token operator">=</span> obj<span class="token punctuation">.</span>foo

<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 输出什么？</span>
</code></pre></div><p>答案是： window 和 global
为什么不是{ name: 'obj', fn: f } 和  obj呢？</p> <p>我们看到的是fn对obj.foo的一个引用，但是实际上是foo的本身。fn就是不带修饰的函数调用。使用默认绑定</p> <h2 id="显示绑定"><a href="#显示绑定" aria-hidden="true" class="header-anchor">#</a> 显示绑定</h2> <p>既然默认绑定和隐式绑定都有不确定性，那么有没有什么方法可以牢牢的绑定住this?
答案是肯定的！使用<code>call</code> <code>apply</code> <code>bind</code>方法即可固定this的指向完成显示绑定。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">sum</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> a <span class="token operator">+</span> b
<span class="token punctuation">}</span>

<span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span> <span class="token comment">//平常我们都是这样使用 其实还可以这样</span>

<span class="token function">sum</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>window<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token function">sum</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>window<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token function">sum</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token punctuation">{</span>obj<span class="token punctuation">:</span> <span class="token string">'沈志勇说'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>
</code></pre></div><p>​​​​</p> <p>https://segmentfault.com/a/1190000017510043</p> <p>https://juejin.im/post/5dc529e8f265da4d2c5ea572</p> <p>https://zhuanlan.zhihu.com/p/63655183</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/js/delay/300ms.html" class="prev">如何解决移动端300ms延迟的问题</a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.9ae891ff.js" defer></script><script src="/assets/js/2.228b9d30.js" defer></script><script src="/assets/js/23.118f77fb.js" defer></script>
  </body>
</html>
